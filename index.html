<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Moje Zadania</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="sidepanel.css">
    <style>
      /* Minimalne style dla logowania i listy zadań */
      #login-container { display:flex; align-items:center; justify-content:center; height:100vh; }
      .login-card { background:#27272a; border:1px solid #3f3f46; padding:24px; border-radius:12px; text-align:center; }
      .login-card h1 { margin:0 0 8px 0; font-size:20px;}
      .login-card p { color:#a1a1aa; margin:0 0 16px 0; }
      .login-btn { background:#8b5cf6; color:#fff; padding:10px 16px; border-radius:8px; display:inline-block; text-decoration:none; }
      .task-area { display:flex; flex-direction:column; gap:8px; }
      #new-task-input { width:100%; padding:10px 12px; border-radius:8px; border:1px solid #3f3f46; background:#3f3f46; color:#fafafa; }
      #task-list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px; overflow:auto; }
      .task-item { background:#27272a; border:1px solid #3f3f46; padding:10px 12px; border-radius:8px; cursor:grab; }
      .top-right { margin-left:auto; display:flex; align-items:center; gap:12px; }
      .top-right a { color:#a1a1aa; text-decoration:none; border:1px solid #3f3f46; padding:6px 10px; border-radius:8px;}
    </style>
</head>
<body>

    <div id="login-container" style="display:none;">
      <div class="login-card">
        <h1>Witaj w Twoich Zadaniach</h1>
        <p>Zaloguj się, aby zsynchronizować zadania z Kalendarzem Google.</p>
        <a class="login-btn" href="/auth/google">Zaloguj przez Google</a>
      </div>
    </div>

    <div id="app-container" class="container" style="display: none;">
        <header class="app-header">
            <div class="list-manager">
                <div id="custom-dropdown-container" class="custom-dropdown-container">
                    <button id="current-list-trigger" class="current-list-trigger">
                        <span id="current-list-name">Moje Zadania</span>
                        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
                    </button>
                    <div id="list-dropdown" class="list-dropdown"></div>
                </div>
            </div>

            <div class="header-actions" style="flex:1;">
                <div class="calendar-nav">
                    <button id="prev-week-btn" title="Poprzedni tydzień">&lt;</button>
                    <button id="today-btn">Dzisiaj</button>
                    <button id="next-week-btn" title="Następny tydzień">&gt;</button>
                </div>
                <h2 id="calendar-date-header" style="flex:1;"></h2>
                <div id="sort-dropdown-container" class="custom-dropdown-container"></div>
                <button id="toggle-completed-btn" class="icon-btn" title="Pokaż ukończone"></button>
                <div class="top-right">
                  <span id="user-display-name"></span>
                  <a id="logout-link" href="/auth/logout" style="display:none;">Wyloguj</a>
                </div>
            </div>
        </header>

        <div class="content-wrapper">
            <main class="main-content">
                <div id="task-area" class="task-area">
                    <input id="new-task-input" type="text" placeholder="Nowe zadanie… (Enter aby dodać)"/>
                    <ul id="task-list"></ul>
                    <div id="completed-tasks-section" class="completed-tasks-section"></div>
                </div>
            </main>
            <aside class="calendar-view">
                <div id="calendar-header" class="calendar-header"></div>
                <div id="calendar-body" class="calendar-body">
                    <div id="calendar-grid" class="calendar-grid"></div>
                </div>
            </aside>
        </div>

        <footer class="app-footer"></footer>
    </div>

    <div id="edit-modal-backdrop" class="modal-backdrop"></div>
    <div id="toast-notification" class="toast-notification"></div>

    <script src="Sortable.min.js"></script>
    <script src="sidepanel.js"></script>
</body>
</html>
